@model HouseholdStore.Models.NewPasswordViewModel
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Новый пароль</title>
    <link rel="stylesheet" href="~/css/login.css" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>

    <div class="auth-page-container">
        <div class="auth-form-wrapper">

            <div class="auth-header">
                <h1 class="auth-title">Новый пароль</h1>
                <p class="auth-subtitle">Введите новый пароль</p>
            </div>

            <form method="post" asp-action="NewPassword" class="auth-form">

                <input type="hidden" asp-for="Email" />

                <div class="form-group">
                    <label>Новый пароль</label>
                    <div class="input-with-icon">
                        <input asp-for="Password" type="password"/>
                        <button type="button" class="toggle-password" aria-label="Показать пароль">
                            <img src="~/image/eye-icon.png" alt="Показать" />
                        </button>
                    </div>
                    <span asp-validation-for="Password" class="field-error"></span>
                </div>

                <div class="form-group">
                    <label>Повторите пароль</label>
                    <div class="input-with-icon">
                        <input asp-for="ConfirmPassword" type="password"/>  
                        <button type="button" class="toggle-password" aria-label="Показать пароль">
                            <img src="~/image/eye-icon.png" alt="Показать" />
                        </button>
                    </div>
                    <span asp-validation-for="ConfirmPassword" class="field-error"></span>
                </div>

                <button type="submit" class="auth-btn primary-btn">Сохранить пароль</button>

            </form>

        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
    const toggleButtons = document.querySelectorAll('.toggle-password');
    toggleButtons.forEach(button => {
        button.addEventListener('click', function () {
            const input = this.parentElement.querySelector('input');
            const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
            input.setAttribute('type', type);

            const icon = this.querySelector('img');
            icon.src = type === 'password'
                ? '/image/eye-icon.png'
                : '/image/eye-closed-icon.png';
        });
    });
});
    </script>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    @if (TempData["ToastMessage"] != null)
    {
        <script>
            Swal.fire({
                toast: true,
                position: 'top-end',
                icon: '@TempData["ToastType"]',
                title: '@TempData["ToastMessage"]',
                showConfirmButton: false,
                timer: 3000,
                timerProgressBar: true
            });
        </script>
    }
</body>
</html>
